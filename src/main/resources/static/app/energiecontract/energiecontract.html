<div ng-include="'top-menu.html'"></div>

<div>
    <h1>
        <span>Energiecontracten</span>
        <div class='pull-right'>
            <button class='btn btn-primary' ng-click="vm.startAdd()"><i class="fa fa-plus-circle"></i> Toevoegen</button>
        </div>
    </h1>
</div>

<div class="table-responsive">
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>Vanaf</th>
                <th>Leverancier</th>
                <th>Gas per m<sup>3</sup></th>
                <th>Stroom per kWh (normaaltarief)</th>
                <th>Stroom per kWh (daltarief)</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="energieContract in vm.energieContracten | orderBy:'van'" ng-click="vm.startEdit(energieContract)" ng-class="{info: energieContract.id === vm.selectedId}">
                <td>{{energieContract.van | date : 'EEE. dd-MM-yyyy'}}</td>
                <td>{{energieContract.leverancier}}</td>
                <td>{{energieContract.gasPerKuub | currency : undefined : 6}}</td>
                <td>{{energieContract.stroomPerKwhNormaalTarief | currency : undefined : 6}}</td>
                <td>{{energieContract.stroomPerKwhDalTarief | currency : undefined : 6}}</td>
            </tr>
        </tbody>
    </table>
</div>

<form name="editform" class="form-horizontal fade" ng-show="vm.showDetails" autocomplete="off" novalidate>
    <hr/>

    <div class="form-group has-feedback required" ng-class="{'has-error' : !editform.vanaf.$valid}">
        <label for="vanaf" class="col-sm-3 control-label">Vanaf</label>
        <div class="col-sm-6">
            <div class="input-group">
                <input id="vanaf" name="vanaf" class="form-control" ng-readonly="true" ng-click="vm.toggleDatepickerPopup()" uib-datepicker-popup="{{vm.dateformat}}" ng-model="vm.vanaf" datepicker-popup-template-url="/app/uib-datepicker-popup-without-clear-button.html" is-open="vm.datepickerPopup.opened" datepicker-options="vm.datepickerPopupOptions" />
                <span class="input-group-addon" ng-click="vm.toggleDatepickerPopup()"><i class="fa fa-calendar"></i></span>
            </div>
        </div>
    </div>

    <div class="form-group has-feedback required" ng-class="{'has-error' : !editform.leverancier.$valid}">
        <label for="leverancier" class="col-sm-3 control-label">Leverancier</label>
        <div class="col-sm-6">
            <input type="text" class="form-control" id="leverancier" name="leverancier" placeholder="Leverancier" ng-maxlength="255" ng-model="vm.energieContract.leverancier" required>
        </div>
    </div>

    <div class="form-group has-feedback required" ng-class="{'has-error' : !editform.gasPerKuub.$valid}">
        <label for="gasPerKuub" class="col-sm-3 control-label">Gas per Gas per m<sup>2</sup></label>
        <div class="col-sm-6">
            <div class="input-group">
                <span class="input-group-addon">&euro; </span>
                <input type="text" energieprijs class="form-control" id="gasPerKuub" name="gasPerKuub" placeholder="{{vm.tariffPlaceholder}}" ng-pattern="vm.tariffPattern" required ng-model="vm.energieContract.gasPerKuub">
            </div>
        </div>
    </div>

    <div class="form-group has-feedback required" ng-class="{'has-error' : !editform.stroomnormaal.$valid}">
        <label for="stroomnormaal" class="col-sm-3 control-label">Stroom per kWh normaaltarief</label>
        <div class="col-sm-6">
            <div class="input-group">
                <span class="input-group-addon">&euro; </span>
                <input type="text" energieprijs class="form-control" id="stroomnormaal" name="stroomnormaal" placeholder="{{vm.tariffPlaceholder}}" ng-pattern="vm.tariffPattern" required ng-model="vm.energieContract.stroomPerKwhNormaalTarief">
            </div>
        </div>
    </div>

    <div class="form-group has-feedback" ng-class="{'has-error' : !editform.stroomdal.$valid}">
        <label for="stroomdal" class="col-sm-3 control-label">Stroom per kWh daltarief</label>
        <div class="col-sm-6">
            <div class="input-group">
                <span class="input-group-addon">&euro; </span>
                <input type="text" energieprijs class="form-control" id="stroomdal" name="stroomdal" placeholder="{{vm.tariffPlaceholder}}" ng-pattern="vm.tariffPattern" ng-model="vm.energieContract.stroomPerKwhDalTarief">
            </div>
        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-3">
            &nbsp;
        </div>
        <div class="col-sm-6">
            <button type="button" ng-show="vm.detailsmode=='edit'" class='btn btn-primary' data-toggle="modal" data-target="#confirmDelete"><i class="fa fa-trash"></i> Verwijderen</button>
            <div class="pull-right">
                <button type="button" class='btn btn-primary' ng-click="vm.save()" ng-disabled="!editform.$valid"><i class="fa fa-check"></i> Opslaan</button>
                <button type="button" class='btn btn-primary' ng-click="vm.cancelEdit()"><i class="fa fa-ban"></i> Annuleren</button>
            </div>
        </div>
    </div>
</form>

<div id="confirmDelete" class="modal fade" role="dialog" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header modal-header-primary">
                <h4 class="modal-title"><i class="fa fa-question-circle"></i> Bevestigen a.u.b.</h4>
            </div>
            <div class="modal-body">
                <p>Weet u zeker dat u het geselecteerde energiecontract wilt verwijderen?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Annuleren</button>
                <button type="button" class="btn btn-danger" ng-click="vm.remove()" data-dismiss="modal">Verwijderen</button>
            </div>
        </div>
    </div>
</div>
